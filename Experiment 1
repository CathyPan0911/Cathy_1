
/* 
C&C Experiment 1：Pressure

Telephone Cathy Pan

Reference：
singleLEDBlink: https://github.com/DigitalFuturesOCADU/CC2025/blob/main/experiment1/leds/singleLEDBlink/singleLEDBlink.ino
https://docs.arduino.cc/built-in-examples/digital/BlinkWithoutDelay/

*/


int pressurePin = A0;          // Analong input for the pressure sensor
int pressureLEDs[] = {2, 3, 4, 5, 6, 7};  
int numLEDs = 6;               // number of LEDs
int pressureValue = 0;         

// pressure value
int threshold = 750;   // pressure value


// blik
unsigned long previousMillis = 0;
int blinkInterval = 500; 
bool ledState = LOW;

void setup() {
  Serial.begin(9600);
  for (int i = 0; i < numLEDs; i++) {
    pinMode(pressureLEDs[i], OUTPUT);
  }
}

void loop() {
  // read FSR
  pressureValue = analogRead(pressurePin);

  Serial.print("Pressure: ");
  Serial.println(pressureValue);

  if (pressureValue > threshold) {
    // Pressure reach certain value → LED blink
    unsigned long currentMillis = millis();
    if (currentMillis - previousMillis >= blinkInterval) {
      previousMillis = currentMillis;
      ledState = !ledState; // blink
      for (int i = 0; i < numLEDs; i++) {
        digitalWrite(pressureLEDs[i], ledState);
      }
    }
  } else {
    // No pressure → LED stays on
    for (int i = 0; i < numLEDs; i++) {
      digitalWrite(pressureLEDs[i], HIGH);
    }
  }
}
